<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login to your account</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="../build/style.css">
</head>
<body>

<div class="container">
    <form action="" id="validateForm" class="d-flex flex-column gap-2 text-center mt-5 w-50">
        <label for="userName">Name</label>
        <input id="userName" type="text" name="userName" class="inputRegister">
        <span></span>

        <label for="userEmail">Email</label>
        <input id="userEmail" type="email" name="userEmail" class="inputRegister">
        <span></span>

        <label for="userPassword">Password</label>
        <input id="userPassword" type="password" name="userPassword" class="inputRegister">
        <span></span>

        <button id="eventButton" type="button">Validate</button>
    </form>
</div>

<script>
    /*
    const API_URL = 'https://nf-api.onrender.com/api/v1';

    const myEmails = { userEmail1: "@noroff.no", userEmail2: "@stud.noroff.no"};
    console.info(myEmails);
*/

    let inputFields = document.querySelectorAll('.inputRegister');// console.log(inputFields);
    let returnMessage = document.querySelectorAll('span');
    let eventButton = document.querySelector('form > button');

    eventButton.addEventListener('click', event => {
        event.preventDefault();
        // console.log("button clicked");
        validateInputs();
    });

    const isValidUserName = userName => {
        let userNameRegex = /^[a-z-A-Z-0-9_æøåÆØÅ]{2,25}$/i;
        return userNameRegex.test(String(userName));
    };

    const isValidEmail = email => {
        const emailRegex = /^[a-z0-9](\.?[a-z0-9]){4,}@(stud.)?noroff\.no$/i;
        return emailRegex.test(String(email));
    };

    const isValidPassword = password => {
        let passwordRegex = /^[a-z-A-Z-0-9æøåÆØÅ]{8,30}$/i; //
        return passwordRegex.test(String(password));
    };

    const validateInputs = () => {
        let userName = inputFields[0].value.trim();
        let email = inputFields[1].value.trim();
        let password = inputFields[2].value.trim();

        if (!isValidUserName(userName)) {
            returnMessage[0].innerText = 'Name is required';
            console.log('FAILED! Name required');
        }
        if (!isValidEmail(email)) {
            returnMessage[1].inninnerTexterHTML = 'Email is not correct';
            console.log('FAILED! Email required '); // return this message
        }
        if (!isValidPassword(password)) {
            returnMessage[2].innerText = 'Password need at least 8 characters';
            console.log('FAILED! Password required ');
        }

        /* This is just to console if all input-fields are valid */
        if (isValidUserName(userName) && isValidEmail(email) && isValidPassword(password)) {
            console.log('SUCCESS! All input fields are validated');
        }
    };

</script>
</body>
</html>